p1 <- ggplot(data = dat_graph)+
geom_boxplot(aes(x = method, upper = (auc_mean + auc_sd) - 0.5, lower = (auc_mean - auc_sd) - 0.5, middle = auc_mean-0.5,
ymax = (auc_mean + auc_sd) - 0.5, ymin = (auc_mean - auc_sd) - 0.5,
group = interaction(alpha1, alpha2, method), col = method),
fill = 'white', position = position_dodge2(preserve = 'total', padding = 0.15), stat = 'identity', size = size) +
geom_hline(yintercept = 0, linetype = 'dashed', col = 'red', alpha = 0.6) +
scale_y_continuous(limits=c(0,0.5),oob = scales::rescale_none) +
ylab('AUC Diff')
print(p1)
View(dat_graph)
p1 <- ggplot(data = dat_graph)+
geom_boxplot(aes(x = method, upper = (auc_mean + auc_sd) - 0.5, lower = (auc_mean - auc_sd) - 0.5, middle = auc_mean-0.5,
ymax = (auc_mean + auc_sd) - 0.5, ymin = (auc_mean - auc_sd) - 0.5,
group = interaction(alpha1, alpha2, method), col = method),
fill = 'white', position = position_dodge2(preserve = 'total', padding = 0.15), stat = 'identity', size = size) +
geom_hline(yintercept = 0, linetype = 'dashed', col = 'red', alpha = 0.6) +
scale_y_continuous(limits=c(0,0.5),oob = scales::rescale_none) +
ylab('AUC Diff')
print(p1)
View(dat_graph)
View(dat_graph)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method) %>%
filter(auc_mean == max(auc_mean))
View(dat_graph)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[2]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>% filter(experiment == experiment_, method == 'SMOTE' | method == 'RO' | method == 'ClassicGAN' | method == 'ClassicExpand') %>% group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>% ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>% filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>% distinct(auc_mean, auc_sd, .keep_all = TRUE) %>% ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph  %>% select(-class_imbalance, -n_control)
View(dat_graph)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[2]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>% filter(experiment == experiment_, method == 'SMOTE' | method == 'RO' | method == 'ClassicGAN' | method == 'ClassicExpand') %>% group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>% ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>% filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>% distinct(auc_mean, auc_sd, .keep_all = TRUE) %>% ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph  %>% select(-class_imbalance, -n_control)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method) %>%
filter(auc_mean == max(auc_mean))
size <- 0.5
p1 <- ggplot(data = dat_graph)+
geom_boxplot(aes(x = method, upper = (auc_mean + auc_sd) - 0.5, lower = (auc_mean - auc_sd) - 0.5, middle = auc_mean-0.5,
ymax = (auc_mean + auc_sd) - 0.5, ymin = (auc_mean - auc_sd) - 0.5,
group = interaction(alpha1, alpha2, method), col = method),
fill = 'white', position = position_dodge2(preserve = 'total', padding = 0.15), stat = 'identity', size = size) +
geom_hline(yintercept = 0, linetype = 'dashed', col = 'red', alpha = 0.6) +
scale_y_continuous(limits=c(0,0.5),oob = scales::rescale_none) +
ylab('AUC Diff')
print(p1)
##stats tests
dat_graph_stat <- dat_graph  %>%rowid_to_column('id_unique')
dat_graph_stat$id_unique <- as.character(dat_graph_stat$id_unique)
dat_test <- dat_graph_stat %>%
group_by(experiment, method, id_unique) %>% arrange(desc(auc_mean)) %>% slice_head(n=1) %>% ungroup() %>% select(-alpha1, -alpha2)
dat_test <- dat_test %>% pivot_wider(names_from = experiment, values_from = c(auc_mean, auc_sd))
ind_test <- gtools::combinations(n = nrow(dat_test), r = 2, v = seq(1, nrow(dat_test)))
pvals <- apply(ind_test, 1, function(x){ BSDA::tsum.test( dat_test$auc_mean_metabolomics[x[1]], dat_test$auc_sd_metabolomics[x[1]], 100,
dat_test$auc_mean_metabolomics[x[2]], dat_test$auc_sd_metabolomics[x[2]], 100,
var.equal = FALSE)$p.value }) #simulation
View(dat_test)
##stats tests
dat_graph_stat <- dat_graph  %>%rowid_to_column('id_unique')
dat_graph_stat$id_unique <- as.character(dat_graph_stat$id_unique)
dat_test <- dat_graph_stat %>%
group_by(experiment, method, id_unique) %>% arrange(desc(auc_mean)) %>% slice_head(n=1) %>% ungroup() %>% select(-alpha1, -alpha2)
View(dat_test)
##stats tests
dat_graph_stat <- dat_graph  %>%rowid_to_column('id_unique')
dat_graph_stat$id_unique <- as.character(dat_graph_stat$id_unique)
dat_test <- dat_graph_stat %>%
group_by(experiment, method, id_unique) %>% arrange(desc(auc_mean)) %>% slice_head(n=1) %>% ungroup() %>% select(-alpha1, -alpha2)
ind_test <- gtools::combinations(n = nrow(dat_test), r = 2, v = seq(1, nrow(dat_test)))
pvals <- apply(ind_test, 1, function(x){ BSDA::tsum.test( dat_test$auc_mean[x[1]], dat_test$auc_sd[x[1]], 100,
dat_test$auc_mean[x[2]], dat_test$auc_sd[x[2]], 100,
var.equal = FALSE)$p.value }) #simulation
stat_test <- pvals %>% p.adjust(method = 'BH')
stat_test <- as.data.frame(ind_test) %>% mutate(adj_p = stat_test, p = pvals) %>% arrange(adj_p) %>%
mutate(id1 = dat_test$id_unique[V1], method1 = dat_test$method[V1],
id2 = dat_test$id_unique[V2], method2 = dat_test$method[V2]) %>%
select(-V1, -V2)
stat_test_sig <- stat_test %>% filter(adj_p <= 0.05)
View(stat_test_sig)
View(stat_test)
source("~/Documents/GAN_Paper/Code/gitrepo/Figures/Results_metabolomics.R", echo=TRUE)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[3]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
View(dat)
summary(dat)
dat_notGAN <- dat %>% filter(experiment == experiment_, method == 'SMOTE' | method == 'RO' | method == 'ClassicGAN' | method == 'ClassicExpand') %>% group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>% ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>% filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>% distinct(auc_mean, auc_sd, .keep_all = TRUE) %>% ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph  %>% select(-class_imbalance, -n_control)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method) %>%
filter(auc_mean == max(auc_mean))
size <- 0.5
p1 <- ggplot(data = dat_graph)+
geom_boxplot(aes(x = method, upper = (auc_mean + auc_sd) - 0.5, lower = (auc_mean - auc_sd) - 0.5, middle = auc_mean-0.5,
ymax = (auc_mean + auc_sd) - 0.5, ymin = (auc_mean - auc_sd) - 0.5,
group = interaction(alpha1, alpha2, method), col = method),
fill = 'white', position = position_dodge2(preserve = 'total', padding = 0.15), stat = 'identity', size = size) +
geom_hline(yintercept = 0, linetype = 'dashed', col = 'red', alpha = 0.6) +
scale_y_continuous(limits=c(0,0.5),oob = scales::rescale_none) +
ylab('AUC Diff')
print(p1)
##stats tests
dat_graph_stat <- dat_graph  %>%rowid_to_column('id_unique')
dat_graph_stat$id_unique <- as.character(dat_graph_stat$id_unique)
dat_test <- dat_graph_stat %>%
group_by(experiment, method, id_unique) %>% arrange(desc(auc_mean)) %>% slice_head(n=1) %>% ungroup() %>% select(-alpha1, -alpha2)
ind_test <- gtools::combinations(n = nrow(dat_test), r = 2, v = seq(1, nrow(dat_test)))
pvals <- apply(ind_test, 1, function(x){ BSDA::tsum.test( dat_test$auc_mean[x[1]], dat_test$auc_sd[x[1]], 100,
dat_test$auc_mean[x[2]], dat_test$auc_sd[x[2]], 100,
var.equal = FALSE)$p.value }) #simulation
stat_test <- pvals %>% p.adjust(method = 'BH')
stat_test <- as.data.frame(ind_test) %>% mutate(adj_p = stat_test, p = pvals) %>% arrange(adj_p) %>%
mutate(id1 = dat_test$id_unique[V1], method1 = dat_test$method[V1],
id2 = dat_test$id_unique[V2], method2 = dat_test$method[V2]) %>%
select(-V1, -V2)
stat_test_sig <- stat_test %>% filter(adj_p <= 0.05)
View(stat_test)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method) %>%
filter(auc_mean == max(auc_mean)) %>%
ungroup()
View(dat_graph)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[3]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO' | method == 'ClassicGAN' | method == 'ClassicExpand') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
View(dat_notGAN)
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
View(dat_GAN)
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[3]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO' | method == 'ClassicGAN' | method == 'ClassicExpand') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph  %>% select(-class_imbalance, -n_control)
View(dat_graph)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[3]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO' | method == 'ClassicGAN' | method == 'ClassicExpand') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
View(dat_graph)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[3]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO' | method == 'ClassicGAN' | method == 'ClassicExpand') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method, class_imbalance, n_control) %>%
filter(auc_mean == max(auc_mean)) %>%
ungroup()
dat_graph <- dat_graph  %>% select(-class_imbalance, -n_control)
View(dat_graph)
size <- 0.5
p1 <- ggplot(data = dat_graph)+
geom_boxplot(aes(x = method, upper = (auc_mean + auc_sd) - 0.5, lower = (auc_mean - auc_sd) - 0.5, middle = auc_mean-0.5,
ymax = (auc_mean + auc_sd) - 0.5, ymin = (auc_mean - auc_sd) - 0.5,
group = interaction(alpha1, alpha2, method), col = method),
fill = 'white', position = position_dodge2(preserve = 'total', padding = 0.15), stat = 'identity', size = size) +
geom_hline(yintercept = 0, linetype = 'dashed', col = 'red', alpha = 0.6) +
scale_y_continuous(limits=c(0,0.5),oob = scales::rescale_none) +
ylab('AUC Diff')
print(p1)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[3]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO' | method == 'ClassicGAN' | method == 'ClassicExpand') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method, class_imbalance, n_control) %>%
filter(auc_mean == max(auc_mean)) %>%
ungroup()
View(dat_graph)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[3]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO' | method == 'ClassicGAN' | method == 'ClassicExpand') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method, class_imbalance, n_control) %>%
filter(auc_mean == max(auc_mean)) %>%
ungroup()
dat_graph <- dat_graph  %>% select(-class_imbalance, -n_control)
size <- 0.5
p1 <- ggplot(data = dat_graph)+
geom_boxplot(aes(x = method, upper = (auc_mean + auc_sd) - 0.5, lower = (auc_mean - auc_sd) - 0.5, middle = auc_mean-0.5,
ymax = (auc_mean + auc_sd) - 0.5, ymin = (auc_mean - auc_sd) - 0.5,
group = interaction(alpha1, alpha2, method), col = method),
fill = 'white', position = position_dodge2(preserve = 'total', padding = 0.15), stat = 'identity', size = size) +
geom_hline(yintercept = 0, linetype = 'dashed', col = 'red', alpha = 0.6) +
scale_y_continuous(limits=c(0,0.5),oob = scales::rescale_none) +
ylab('AUC Diff')
print(p1)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[3]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
problems(dat)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[2]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO' | method == 'ClassicGAN' | method == 'ClassicExpand') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method, class_imbalance, n_control) %>%
filter(auc_mean == max(auc_mean)) %>%
ungroup()
dat_graph <- dat_graph  %>% select(-class_imbalance, -n_control)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[2]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO' | method == 'ClassicGAN' | method == 'ClassicExpand') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method, class_imbalance, n_control) %>%
filter(auc_mean == max(auc_mean)) %>%
ungroup()
View(dat_graph)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[2]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method, class_imbalance, n_control) %>%
filter(auc_mean == max(auc_mean)) %>%
ungroup()
View(dat_graph)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[2]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method, class_imbalance, n_control) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
filter(auc_mean == max(auc_mean)) %>%
ungroup()
View(dat_graph)
?distinct
View(dat_graph)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[3]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method, class_imbalance, n_control) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
filter(auc_mean == max(auc_mean)) %>%
ungroup()
View(dat_graph)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[3]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiments <- c("metabolomics", "sim", "microarray")
experiment_ <- experiments[1]
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method, class_imbalance, n_control) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
filter(auc_mean == max(auc_mean)) %>%
ungroup()
View(dat_graph)
library(tidyverse)
library(ggplot2)
setwd('/Users/cusworsj/Documents/GAN_Paper/Code/gitrepo')
experiment <- "metabolomics"
dat <- read_csv('results_merged.csv', col_types = 'ffffddfdddc')
summary(dat)
dat_notGAN <- dat %>%
filter(experiment == experiment_, method == 'SMOTE' | method == 'RO') %>%
group_by(method, n_control, class_imbalance) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup()
dat_GAN <- dat %>% filter(experiment == experiment_, method == 'ExpandGAN' | (method == 'GAN' & alpha1 == 0) )
dat_GAN <- rbind(dat_GAN, dat %>%
filter(experiment == experiment_, method == 'GAN' & alpha1 == 1) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
ungroup())
dat_graph <- rbind(dat_notGAN, dat_GAN)
dat_graph <- dat_graph %>%
group_by(alpha1, alpha2, method, class_imbalance, n_control) %>%
distinct(auc_mean, auc_sd, .keep_all = TRUE) %>%
filter(auc_mean == max(auc_mean)) %>%
ungroup()
dat_graph <- dat_graph  %>% select(-class_imbalance, -n_control)
size <- 0.5
p1 <- ggplot(data = dat_graph)+
geom_boxplot(aes(x = method, upper = (auc_mean + auc_sd) - 0.5, lower = (auc_mean - auc_sd) - 0.5, middle = auc_mean-0.5,
ymax = (auc_mean + auc_sd) - 0.5, ymin = (auc_mean - auc_sd) - 0.5,
group = interaction(alpha1, alpha2, method), col = method),
fill = 'white', position = position_dodge2(preserve = 'total', padding = 0.15), stat = 'identity', size = size) +
geom_hline(yintercept = 0, linetype = 'dashed', col = 'red', alpha = 0.6) +
scale_y_continuous(limits=c(0,0.5),oob = scales::rescale_none) +
ylab('AUC Diff')
print(p1)
##stats tests
dat_graph_stat <- dat_graph  %>%
rowid_to_column('id_unique')
dat_graph_stat$id_unique <- as.character(dat_graph_stat$id_unique)
dat_test <- dat_graph_stat %>%
group_by(experiment, method, id_unique) %>%
arrange(desc(auc_mean)) %>%
slice_head(n=1) %>%
ungroup() %>%
select(-alpha1, -alpha2)
ind_test <- gtools::combinations(n = nrow(dat_test), r = 2, v = seq(1, nrow(dat_test)))
pvals <- apply(ind_test, 1, function(x){ BSDA::tsum.test( dat_test$auc_mean[x[1]], dat_test$auc_sd[x[1]], 100,
dat_test$auc_mean[x[2]], dat_test$auc_sd[x[2]], 100,
var.equal = FALSE)$p.value }) #simulation
stat_test <- pvals %>% p.adjust(method = 'BH')
stat_test <- pvals %>% p.adjust(method = 'BH')
stat_test <- as.data.frame(ind_test) %>% mutate(adj_p = stat_test, p = pvals) %>% arrange(adj_p) %>%
mutate(id1 = dat_test$id_unique[V1], method1 = dat_test$method[V1],
id2 = dat_test$id_unique[V2], method2 = dat_test$method[V2]) %>%
select(-V1, -V2)
stat_test_sig <- stat_test %>% filter(adj_p <= 0.05)
